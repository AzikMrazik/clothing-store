# Контрольный список безопасности интернет-магазина

## Настройки перед запуском в production

### 1. Переменные окружения
- [ ] Создать уникальные секретные ключи для JWT
- [ ] Настроить безопасные секретные ключи для cookie
- [ ] Указать точные домены в CORS_ORIGIN
- [ ] Сменить режим NODE_ENV на "production"
- [ ] Убедиться, что нет секретных ключей в коде

### 2. SSL/TLS
- [ ] Установить SSL/TLS сертификаты (Let's Encrypt или коммерческий)
- [ ] Настроить автоматическое обновление сертификатов
- [ ] Включить HSTS (Strict-Transport-Security)
- [ ] Отключить поддержку устаревших протоколов (только TLS 1.2+)

### 3. Серверная настройка
- [ ] Настроить брандмауэр (открыть только необходимые порты)
- [ ] Установить fail2ban для защиты от брутфорс атак
- [ ] Настроить регулярные обновления безопасности сервера
- [ ] Установить и настроить ModSecurity или аналогичный WAF
- [ ] Настроить NGINX с защитными заголовками

### 4. Базы данных
- [ ] Использовать отдельного пользователя БД с минимальными привилегиями
- [ ] Отключить удаленный доступ к базе данных (только localhost)
- [ ] Настроить регулярное резервное копирование
- [ ] Проверить установку и обновление MongoDB до последней версии
- [ ] Включить аутентификацию MongoDB

### 5. Зависимости
- [ ] Запустить `npm audit` и исправить найденные уязвимости
- [ ] Обновить все пакеты до последних стабильных версий
- [ ] Использовать package-lock.json для фиксации версий
- [ ] Настроить автоматическое сканирование зависимостей (Snyk, Dependabot)

### 6. Файлы и доступы
- [ ] Проверить корректность прав доступа к файлам
- [ ] Убедиться, что директория для загрузок правильно настроена
- [ ] Настроить ограничения на размер загружаемых файлов
- [ ] Использовать отдельные сервисы для хранения медиафайлов (опционально)

## Регулярные проверки безопасности

### 1. Мониторинг
- [ ] Настроить мониторинг логов безопасности (ELK, Graylog или аналоги)
- [ ] Включить оповещения о подозрительной активности
- [ ] Настроить мониторинг производительности для обнаружения DDoS-атак
- [ ] Проверять логи на регулярной основе

### 2. Обновления и патчи
- [ ] Настроить регулярную проверку обновлений NPM-пакетов
- [ ] Следить за CVE-уязвимостями для используемых технологий
- [ ] Установить процедуру быстрого обновления при обнаружении серьезных уязвимостей

### 3. Аудит
- [ ] Проводить регулярный внутренний аудит безопасности (раз в квартал)
- [ ] Рассмотреть возможность проведения внешнего пентеста (раз в год)
- [ ] Проверять корректность настроек CSP и других заголовков безопасности
- [ ] Регулярно сканировать сайт на наличие уязвимостей

## Плановые действия после развертывания

### 1. Первые 24 часа
- [ ] Проверить корректность работы HTTPS
- [ ] Проверить правильность заголовков безопасности
- [ ] Убедиться, что логирование работает корректно
- [ ] Проверить работу всех модулей безопасности

### 2. Первая неделя
- [ ] Мониторить логи на предмет аномалий
- [ ] Убедиться, что защита от брутфорс-атак работает
- [ ] Проверить работоспособность резервного копирования
- [ ] Протестировать восстановление из бэкапа

### 3. Дальнейшие действия
- [ ] Настроить автоматические уведомления о проблемах безопасности
- [ ] Разработать план реагирования на инциденты безопасности
- [ ] Обучить персонал основам информационной безопасности
- [ ] Проводить регулярные обновления политик безопасности

## Полезные инструменты

1. **Сканирование уязвимостей**:
   - OWASP ZAP (бесплатный)
   - Burp Suite (платный)
   - Snyk (бесплатный для открытого кода)

2. **Проверка заголовков безопасности**:
   - https://securityheaders.com
   - https://observatory.mozilla.org

3. **Сканирование исполняемого кода**:
   - SonarQube
   - ESLint с плагинами безопасности

4. **Мониторинг безопасности**:
   - Wazuh (бесплатный)
   - ELK Stack
   - Graylog